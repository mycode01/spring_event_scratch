### 스프링 이벤트 핸들링

간단한 어노테이션 + aop 를 이용한 이벤트 핸들링  
항상 event driven 으로 로직을 작성해보고 싶지만 모르는 사람이 봤을때 로직을 제대로 이해하기 힘들고,   
프레임워크에 의존적인 코드가 생성되므로 사용하지 않던 스프링 이벤트를 이용한 exam을 작성해보았음. 

굳이 어노테이션을 사용할 필요없이 메소드 시그니쳐 포인트컷을 이용해도 된다.  
다만 그리하였을때는 이벤트 타입을 어드바이저에게 넘기기 위해서 User를 상태 값으로 가지는 리턴 타입이 필요하다.  
이 예제의 경우 '서비스에서 직접 UserEvent 를 리턴하거나, 이벤트를 발행해도 되지 않은가?' 라는 물음이 따라올수 있지만,  
서비스에서는 이벤트를 발행하는 것은 자신의 관심사 바깥의 영역이라고 생각한다.(UserEvent를 리턴하는부분도 마찬가지이다.)

appMain에서 userService를 통해 User를 생성하거나 검색을 한 후  
메소드에 걸려있는 어노테이션을 감시하는 aop 어드바이저에 의해 UserEvent가 발행되고,  
컨텍스트 큐에 들어간 UserEvent는 이벤트 리스너에 의해 consume된다.
예제는 단순 로그이지만 흔히 유저 등록 웰컴메일이나 sms, 타 서비스 송신등으로 대체될수 있다.

다만 해당 예제가 commandline runner가 아니라, 웹 서버일 경우 트랜잭션이 끝나고 OSIV에 설정에 따라 다르긴 하겠지만   
트랜잭션이 종료된 이후에는 해당 코드가 정상적으로 동작하지 않을것 같다.(fetch type lazy 일 경우)
